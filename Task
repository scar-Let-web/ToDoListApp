public class Task implements Comparable<Task> {

    public enum Status {
        NOT_STARTED,
        MARKED_AS_DONE,
        DONE
    }

    private String title;
    private String category;
    private int priority;
    private Status status;

    public Task(String title, String category, int priority) {
        this.title = title;
        this.category = category;
        this.priority = priority;
        this.status = Status.NOT_STARTED;
    }

    public String getTitle() {
        return title;
    }

    public String getCategory() {
        return category;
    }

    public int getPriority() {
        return priority;
    }

    public Status getStatus() {
        return status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

    @Override
    public int compareTo(Task other) {
        return Integer.compare(this.priority, other.priority);
    }

    @Override
    public String toString() {
        String symbol;
        switch (status) {
            case NOT_STARTED: symbol = "○"; break;
            case MARKED_AS_DONE: symbol = "◐"; break;
            case DONE: symbol = "✔"; break;
            default: symbol = "";
        }
        return symbol + " (" + priority + ") " + title;
    }

    // ===== FILE PERSISTENCE =====
    public String toFileString() {
        return title + "|" + category + "|" + priority + "|" + status;
    }

    public static Task fromFileString(String line) {
        String[] parts = line.split("\\|");
        if (parts.length != 4) {
            throw new IllegalArgumentException("Invalid task data: " + line);
        }

        Task task = new Task(
                parts[0],
                parts[1],
                Integer.parseInt(parts[2])
        );
        task.setStatus(Status.valueOf(parts[3]));
        return task;
    }
}

import java.io.*;
import java.util.List;

public class TaskFileHandler {

    private static final String FILE_NAME = "tasks.txt";

    public static void save(List<Task> tasks) {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(FILE_NAME))) {
            for (Task task : tasks) {
                writer.write(task.toFileString());
                writer.newLine();
            }
        } catch (IOException e) {
            System.out.println("Error saving tasks.");
        }
    }

    public static void load(List<Task> tasks) {
        File file = new File(FILE_NAME);
        if (!file.exists()) return;

        try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
            String line;
            while ((line = reader.readLine()) != null) {
                tasks.add(Task.fromFileString(line));
            }
        } catch (IOException e) {
            System.out.println("Error loading tasks.");
        }
    }
}

import javax.swing.*;
import java.awt.*;
import java.util.List;

public class TaskListPanel extends JPanel {

    private DefaultListModel<Task> model = new DefaultListModel<>();
    private JList<Task> list = new JList<>(model);

    public TaskListPanel() {
        setLayout(new BorderLayout());
        add(new JScrollPane(list), BorderLayout.CENTER);
    }

    public void updateTasks(List<Task> tasks) {
        model.clear();
        for (Task task : tasks) {
            model.addElement(task);
        }
    }

    public Task getSelectedTask() {
        return list.getSelectedValue();
    }
}

import java.util.*;
import java.util.stream.Collectors;

public class TaskManager {

    private List<Task> tasks = new ArrayList<>();

    public TaskManager() {
        loadTasks();
    }

    public void addTask(Task task) {
        tasks.add(task);
        saveTasks();
    }

    public void removeTask(Task task) {
        tasks.remove(task);
        saveTasks();
    }

    public List<Task> getTasksByCategory(String category) {
        return tasks.stream()
                .filter(t -> t.getCategory().equals(category))
                .sorted()
                .collect(Collectors.toList());
    }

    public void saveTasks() {
        TaskFileHandler.save(tasks);
    }

    public void loadTasks() {
        TaskFileHandler.load(tasks);
    }
}

import javax.swing.*;
import java.awt.*;

public class TodoApp extends JFrame {

    private TaskManager manager = new TaskManager();
    private String[] categories = {"Academic", "Personal", "Career"};
    private TaskListPanel[] panels = new TaskListPanel[categories.length];

    public TodoApp() {

        setTitle("To-Do List");
        setSize(500, 400);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        // ===== SAVE ON CLOSE (SWING WAY) =====
        addWindowListener(new java.awt.event.WindowAdapter() {
            @Override
            public void windowClosing(java.awt.event.WindowEvent e) {
                manager.saveTasks();
            }
        });

        // Tabs
        JTabbedPane tabs = new JTabbedPane();
        for (int i = 0; i < categories.length; i++) {
            panels[i] = new TaskListPanel();
            tabs.add(categories[i], panels[i]);
        }

        // Input panel
        JPanel input = new JPanel(new FlowLayout());
        JTextField taskField = new JTextField(12);
        JComboBox<String> categoryBox = new JComboBox<>(categories);
        JSpinner prioritySpinner = new JSpinner(new SpinnerNumberModel(1, 1, 99, 1));
        JButton addBtn = new JButton("Add");

        input.add(new JLabel("Task"));
        input.add(taskField);
        input.add(new JLabel("Category"));
        input.add(categoryBox);
        input.add(new JLabel("Priority"));
        input.add(prioritySpinner);
        input.add(addBtn);

        // Action buttons
        JPanel actions = new JPanel();

        JComboBox<String> statusBox = new JComboBox<>(new String[]{
                "Not Yet Started", "Mark as Done", "Done"
        });

        JButton applyStatusBtn = new JButton("Apply Status");
        JButton deleteBtn = new JButton("Delete");

        actions.add(statusBox);
        actions.add(applyStatusBtn);
        actions.add(deleteBtn);

        add(tabs, BorderLayout.CENTER);
        add(input, BorderLayout.NORTH);
        add(actions, BorderLayout.SOUTH);

        // ===== BUTTON LOGIC =====

        addBtn.addActionListener(e -> {
            String title = taskField.getText().trim();
            if (!title.isEmpty()) {
                manager.addTask(new Task(
                        title,
                        (String) categoryBox.getSelectedItem(),
                        (int) prioritySpinner.getValue()
                ));
                taskField.setText("");
                refreshAll();
            }
        });

        applyStatusBtn.addActionListener(e -> {
            Task selected = panels[tabs.getSelectedIndex()].getSelectedTask();
            if (selected != null) {
                switch ((String) statusBox.getSelectedItem()) {
                    case "Not Yet Started":
                        selected.setStatus(Task.Status.NOT_STARTED);
                        break;
                    case "Mark as Done":
                        selected.setStatus(Task.Status.MARKED_AS_DONE);
                        break;
                    case "Done":
                        selected.setStatus(Task.Status.DONE);
                        break;
                }
                manager.saveTasks();
                refreshAll();
            }
        });

        deleteBtn.addActionListener(e -> {
            Task selected = panels[tabs.getSelectedIndex()].getSelectedTask();
            if (selected != null) {
                manager.removeTask(selected);
                refreshAll();
            }
        });

        refreshAll();
    }

    private void refreshAll() {
        for (int i = 0; i < categories.length; i++) {
            panels[i].updateTasks(manager.getTasksByCategory(categories[i]));
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new TodoApp().setVisible(true));
    }
}
